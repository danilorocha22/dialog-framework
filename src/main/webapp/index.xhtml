<!DOCTYPE html>
<html lang="pt-br"
      xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui">

<h:head>
    <meta charset="UTF-8"/>
    <title>Nova Ordem de Serviço</title>
</h:head>

<h:body id="body">
    <header id="header">
        <h:graphicImage library="static" name="logo.png"/>
        <h:outputScript name="jquery/jquery-plugins.js" library="primefaces"/>
        <h:outputScript name="jquery/jquery.js" library="primefaces"/>
    </header>
    <f:metadata>
        <f:viewAction action="#{ordemServicoController.inicializar}" />
    </f:metadata>


    <div id="conteudo">
        <h1>Nova Ordem de Serviço</h1>

        <h:form id="form">
            <p:messages>
                <p:autoUpdate/>
            </p:messages>

            <p:panelGrid columns="2">
                <p:outputLabel value="Cliente:" for="cliente"/>
                <h:panelGroup>
                    <p:inputText id="cliente" value="#{ordemServicoController.nomeCliente}" style="margin-right: 5px"
                                 readonly="#{facesContext.currentPhaseId.name eq 'RENDER_RESPONSE'}"/>

                    <p:commandButton icon="pi pi-search" title="Pesquisar"
                                     styleClass="rounded-button"
                                     actionListener="#{selecaoClienteController.abrirDialogModal}"
                                     process="@this" update="@none">
                        <p:ajax event="dialogReturn" listener="#{ordemServicoController.clienteSelecionado}"
                                process="@this" update="cliente"/>
                        <p:resetInput target="cliente"/>
                    </p:commandButton>
                </h:panelGroup>

                <p:outputLabel value="Data de Entrada:" for="data-entrada"/>
                <p:calendar id="data-entrada" size="12" pattern="dd/MM/yyyy" mask="99/99/9999"
                            value="#{ordemServicoController.ordemServico.dataEntrada}"/>

                <p:outputLabel value="Preço:" for="preco"/>
                <p:inputMask id="preco" size="12" maxlength="12"
                             value="#{ordemServicoController.ordemServico.preco}">
                    <f:convertNumber pattern="#,##0.00" currencySymbol="R$"/>
                </p:inputMask>

                <p:outputLabel value="Descrição:" for="descricao"/>
                <p:inputTextarea id="descricao" cols="50" rows="4"
                                 value="#{ordemServicoController.ordemServico.descricao}"/>

                <p:outputLabel/>
                <p:commandButton value="Salvar" process="@form" update="@form"
                                 action="#{ordemServicoController.salvar}"/>

            </p:panelGrid>
        </h:form>
    </div>
</h:body>
</html>